---
import App from "../../layouts/App.astro";
import { POSTS_PER_PAGE } from "../../consts";
import Pagination from "../../components/Pagination.astro";
import postIndex from "../../data/postIndex";

const totalPosts = postIndex.results.length;
const totalPages = Math.ceil( totalPosts/POSTS_PER_PAGE );

export const getStaticPaths = async () => {
  const totalPosts = postIndex.results.length;
  const totalPages = Math.ceil( totalPosts/POSTS_PER_PAGE );

  return Array.from({ length: totalPages }, (_, i) => i + 1).map(( item ) => {
    return {
      params: {
        page: item,
      }
    }
  });
}

const { page } = Astro.params;
---
<App>
  <div class="container mx-auto">
    <!-- {
      postData.map( (post) => (
        <div class="post-body max-w-[720px] px-4 mx-auto">
          <div class="post-header">
            <h1 class="post-title heading-1" set:html={post.title.rendered} />
          </div>
          <div class="post-content" set:html={post.content.rendered} />
        </div>
      ))
    } -->
    <Pagination currentPage={page} baseUrl="/page" totalPages={totalPages}/>
  </div>
</App>
